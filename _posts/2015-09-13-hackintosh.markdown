---
layout: post
title: "黑苹果安装心得"
date: 2015-09-13 20:11:00
author: vjudge1
categories: Mac
tags: Hackintosh
---
* content
{:toc}

鉴于周围有很多人想体验体验苹果系统，作为一个成功用上黑苹果的人，我觉得应该写点什么了。





[% callout %]
什么是黑苹果

黑苹果就是在自己（非苹果品牌）电脑上面安装的苹果系统。因为苹果官方不允许这样做，所以对于初学者来说，黑苹果的安装绝对比其他系统困难很多。
[% endcallout %]

# 准备

## 买电脑

如果你还没买电脑，建议咨询咨询已经装过黑苹果的人，尽量买一台配置接近苹果的电脑。<span class="blackout">土豪们可以直接买苹果电脑，反正 Pro 才一万多点，比戴尔的外星人便宜多了，而且还省了高达九成九的麻烦。</span>

绝对不要：

1. 买联想或惠普的电脑。除非你想知道刷机刷成砖的样子。
2. 买处理器是 AMD 的电脑。处理器是 AMD，意味着你和黑苹果无缘了。<span class="blackout">其实 AMD 也能装，就是麻烦事儿多点。</span>

## 做好思想准备

1. 如果你是从头开始，请做好**长期斗争**的准备！

   如果事情一切顺利，大约需要一个星期的时间。如果事情不顺，可能得花几个月时间才能弄得比较好用。

2. 安装双系统（3 个系统、4 个系统……）不会对电脑造成破坏，<span class="blackout">除非你脑残或手残。</span>

## 论坛

请到[远景论坛](http://bbs.pcbeta.com)上面注册账号。这不是广告，而是各路网友智慧的结晶。

注册之后请大致扫一眼[这个目录](http://bbs.pcbeta.com/viewthread-1516108-1-1.html)。以后我们会经常和这个论坛打交道。

接下来本文会贴一些来自远景论坛的链接。有的需要阅读权限或下载附件，所以你当然要注册账号。

## 认识一些概念

如果对以下问题不感冒，那么请不要拿黑苹果练手。<span class="blackout">先好好练习如何装 Windows 系统，练会了再回来。</span>

1. 苹果系统最新版本是多少？
2. 装过系统吗？
3. 你的电脑是 UEFI/Legacy、GPT/MBR？
4. 什么是引导？

## 确定自己电脑能不能安装

### 虚拟机

只要电脑处理器不是 AMD 的，基本上没问题。<span class="blackout">可以直接下载一个已经装好的映像。</span>

### 笔记本

只要不是 AMD 处理器，就可以看[这里](http://bbs.pcbeta.com/viewthread-1516108-1-1.html)。如果 CPU 和显卡符合要求，那么可以继续了。

苹果系统不支持 AMD 处理器。<span style="background-color: #111">可以通过更换破解之后的内核来安装。因为破解有一定的隐患（例如不能直接升级），所以说，即使能成功，我也不建议在 AMD 处理器电脑上安装。</span>

# 安装

[% callout style=success %]
提醒

在正式按照论坛教程安装系统之前，先看这里——

装系统，不管是安装哪个系统（Windows/Linux/黑苹果），思路都是一样的：

1. 下载安装盘
2. 将下载好的安装盘制作成启动盘
3. 通过启动盘启动安装盘
4. 运行安装程序
5. 完成系统安装
6. 安装驱动
7. 安装软件，开始使用新系统

[% endcallout %]

由于 Windows 或比较流行的 Linux 发行版都希望用户能够轻松地把系统装到自己电脑上，所以，即使有些概念不太好理解，最终还是可以不太费力地把系统装好。

而苹果公司并不希望用户在普通电脑上面安装苹果，所以以上每一步操作都有着极大的障碍。而且，苹果是硬件公司，你的电脑很可能因为与苹果硬件不匹配而在半路出现问题！

装黑苹果感觉很复杂，原因就在此。

接下来将对以上几步进行讲解，并用 Windows 作对比。希望大家理解之后再去看论坛的教程。

## 0. 准备

由于黑苹果的特殊性，我们应该做一些准备：

1. 把电脑硬盘给苹果划出一个分区。如果只想体验体验，那么 50GB 足矣。如果日后可能要作为日常系统使用（事实上很可能如此），并且要安装一些大型软件<span class="blackout">例如黄片</span>，那么就要多分一些，因为苹果系统分区基本上没办法改容量。
2. 准备一个 PE 启动盘。一旦后悔，可以随时把电脑恢复原状。
3. 虽然事实上只用 Linux 系统也能把黑苹果装好，但是我建议初学者在 Windows 里操作。因为在 Linux 中一旦出问题，只有那高高在上的[没有人](http://cn.uncyclopedia.wikia.com/没有人)才会来救你。

[% callout %]
Linux

不建议你用 Linux，是因为很难找到一个在 Linux 中刻录 dmg/cdr 格式的软件。如果你已经刻了一个安装盘，或者找到刻录软件了，您请便。只有刻启动盘、安装启动器和处理故障的时候才需要电脑上原有的系统。

Linux，装上 HFS+ 文件系统支持之后就可以读写 HFS+ 分区了，而且是免费的。
[% endcallout %]

## 1. 下载安装盘

[% callout %]
Windows 是这样的

Windows 的安装盘是 ISO 格式的（我从来不考虑 GHO），所以可以很轻松地刻录成安装盘。即使不想刻录，基于 U 盘的解决方案也有很多。
[% endcallout %]

而苹果是这样的——苹果安装盘的映像是 dmg 或 cdr 格式的。不管是哪种，能够读取的软件都很少。而且普通电脑是无法直接拿来引导！

在远景论坛上面，苹果系统的安装盘一般分三种：

1. 原版——基于原版制作的安装盘。一般不是“彻底”的原版，而是进行了一些简单的加工，可以用于安装，因为“纯正”的原版在普通电脑上面根本用不了。
2. 懒人版——经过破解，支持了 MBR 分区（因为苹果系统只支持 EFI+GPT）。除此之外，不要以为懒人版有什么额外的东西了。
3. 整合版——整合了一些驱动。

那么如何选择安装盘？这取决于电脑的配置情况——

1. UEFI+GPT 优先选择原版。这是最接近原生苹果的搭配。
2. Legacy+MBR 当然只能选择懒人版。

[% callout %]
个人建议

我的建议是，如果电脑支持而且你会操作，那么就先把电脑转换成 UEFI+GPT，因为在 MBR 条件下把系统装好，**进行系统升级会带来很大麻烦**，而 UEFI+GPT 可以大大方方地升级而不用担心出错。不过也可以在装完之后再转。[这里]({{ site.baseurl }}/2014/12/18/legacy-mbr-to-uefi-gpt-hackintosh/)是一个装完之后才转换的教程。
[% endcallout %]

[% callout style=warning %]
看不懂？

即使看不懂，也要清楚自己电脑到底是 UEFI+GPT，还是 Legacy+MBR，或者是什么方案，否则后面实在无法继续。

下面是一些简易的区分方法：

1. Windows XP：肯定是 Legacy+MBR
2. Windows 7：绝大多数系统都是 Legacy+MBR
3. Windows 8 或更高：打开“计算机管理”，找到“磁盘管理”。如果里面有几个零碎的、没有盘符的分区，那么就是 UEFI+GPT，否则是 Legacy+MBR。
4. Linux：能够装 Linux，那么这个问题不用教了吧？（提示：看 /dev/sda1 后面是 sda2 还是 sda5）

[% endcallout %]

## 2. 将下载好的安装盘制作成启动盘

[% callout %]
Windows 是这样的

ISO 格式安装盘可以直接刻录到光盘里。因为现在很少有人使用光盘，所以一般都采用一些软件（例如 UltraISO）将安装盘刻录到 U 盘中。即使不直接刻录，通过 PE 启动盘也可以进行安装。总之解决方案非常多。
[% endcallout %]

由于苹果采用了特殊的文件系统（HFS+），所以在 Windows 中不太容易看到其中的文件。并且，由于没有引导信息，所以即使刻录好也无法直接引导启动（后面再讲如何启动）。

因此论坛教程会让你安装 `TransMac`、`Leopard 硬盘安装助手`之类的软件。这些软件将完成同样的“刻录”过程。

此外还有一点与 Windows 不同，刻录黑苹果安装盘的时候，有的教程会让你刻录到 U 盘中，有的教程会让你刻录到自己电脑硬盘中。这些都是可行的。

刻录完毕，有些教程会让你把刻录的磁盘分区的磁盘标记改为 AF（MBR 磁盘）或 \{48465300-0000-11AA-AA11-00306543ECAC\}。这是为了能让各种软件正确地将分区识别为“苹果系统分区”而不是损坏的分区。

## 3. 通过启动盘启动安装盘

[% callout %]
Windows 是这样的

开机按 F12
[% endcallout %]

黑苹果就麻烦多了……

### 启动器

与刻录出来的 Windows 安装盘不同，苹果系统盘映像不含引导信息（就算有，普通电脑也根本无法引导）。

因此必须借助一个辅助程序，才能让普通电脑启动苹果系统。目前流行这两个程序：

* Clover (四叶草)——用于 UEFI+GPT 模式
* Chameleon (变色龙)——用于 Legacy+MBR 模式

变色龙有 Windows 版安装程序，而四叶草没有，因此四叶草的文件需要想办法弄到手。

[% callout %]
EFI 引导

通过 EFI 引导并不需要去“刻录”。以 U 盘为例，只要在 U 盘根目录里有个 EFI 文件夹，EFI 里面有个 BOOT，BOOT 里面有个 bootx64.efi，而且文件正确，电脑就能以 UEFI 模式引导 U 盘了。
[% endcallout %]

以后会经常遇到“-f”、“-x”、“-v”等字样，这些是 Chameleon 的；而“Verbose mode”、“Without caches”等字样是 Clover 的。

### 驱动 (Kext)

苹果电脑把驱动叫做“Kext”。以后看到“SLE”（/System/Library/Extensions）、“EE”（/Extra/Extensions，变色龙专用）、“kexts/10.10”（Clover 安装目录/kexts/10.10，Clover 专用）要知道他们在谈论驱动的存放路径。

由于苹果电脑硬件和普通电脑不完全一样，部分驱动在普通电脑上面会产生错误，因此在正式进入安装程序之前，需要添加或删除一些驱动。

由于 Windows 无法直接操作苹果分区，所以有的教程会让你安装 HFS+ for Windows，并且够意思地给了一个注册码。（某些 Linux，如 Ubuntu，可以直接读取 HFS+ 分区，不过需要手动用 mount 挂载才能写入。）

添加和删除哪些驱动呢？看教程怎样说。此外有贴子专门解释了那些需要添加的驱动的作用。

## 4. 运行安装程序

[% callout %]
Windows 是这样的

这一步 Windows 和黑苹果都一样，屏幕上都会出现能让人认识的中国字（虽然连成单词之后不一定知道是什么意思）。只不过，运气不好的话，黑苹果安装程序可以让系统崩溃……
[% endcallout %]

[% callout %]
学会自救

在激动人心时刻到来之前，我们必须学会如何自救。

一般情况下，教程都会告诉你应该用什么参数启动，并让你开启详细模式。但是，毕竟不是官方电脑，所以系统崩溃是正常现象。一旦崩溃，你需要知道如何通过错误信息进行自救。[这里](http://bbs.pcbeta.com/viewthread-863656-1-1.html)是一个常见错误总结。
[% endcallout %]

进行到这一步时，我们终于要和真正的苹果程序打交道了。

如果一进去就崩溃了，那么当然要去论坛搜索相关错误现象和错误信息。建议不要直接提问，以免被人鄙视。

安装向导都是中国字，很好懂。不过千万不要手残，选错了分区……

安装过程很漫长。即使电脑是固态硬盘，安装时间也不短。这个时候你只能祈祷不出错。

如果安装坚持到了最后，没崩溃，那么恭喜你！

## 5. 完成系统安装

有的教程会让你重新删驱动，照做即可。

如果无法进入系统，那么一定要用“详细模式”引导，记录错误现象，并向论坛寻求帮助。

如果能够进入系统，那么接下来按照屏幕提示完成系统安装即可。都是中国话，应该没有人看不懂。

[% callout style=warning %]
讲解到此为止

可以逛论坛去了，因为在你真正操作到这一步的时候，麻烦才刚刚开始……
[% endcallout %]

## 6. 安装驱动

[% callout style=warning %]
先把系统装好

先把系统装好，然后再讨论装驱动的问题。
[% endcallout %]

[% callout %]
Windows 是这样的

下载并按照“驱动精灵”，如果没有网卡驱动就下载集成网卡驱动的版本。全部装完之后把驱动精灵卸载就可以了。
[% endcallout %]

[% callout %]
白苹果是这样的

苹果是硬件公司——所有硬件都免驱，系统装好就可以使用了。
[% endcallout %]

安装系统，运气好的（初学者），几个小时就能弄好。运气差的也不会花太多时间。

因为绝大多数时间都花在驱动上面了。<span style="background-color: #111;">忘记备份驱动和 DSDT
 而重装系统也会产生相同的效果。</span>

如果进行到这一步，接下来就要经常和论坛打交道了，例如[这个导览](http://bbs.pcbeta.com/viewthread-1516108-1-1.html)和[这个导览](http://bbs.pcbeta.com/viewthread-1470582-1-1.html)。

### 网卡

网络是最关键的问题。有了网络，你才能到论坛上面搜答案。

有线网卡一般问题不大。到论坛里找到驱动，下载安装即可。

无线网卡问题很大，大致分为以下几种情况：

1. Atheros、Broadcom 牌：如果论坛中提到解决方案，那么太好了。（有些型号免驱，装完系统就能直接用——这是最好的）如果“无解”，那么就得换无线网卡了。
2. Intel 牌：直接预备 30 块钱换无线网卡吧。
3. USB 无线网卡：弄清楚网卡芯片，然后到论坛上面寻找解决方案（驱动）。**USB 无线网卡不稳定，容易导致系统崩溃。**

[% callout %]
无线网卡

到淘宝网即可很方便地买到支持黑苹果的无线网卡，而且价格并不算贵。不过最好先确认一下接口，并且确认应该使用半高还是全高（把电脑拆开就知道是什么意思了）。
[% endcallout %]

[% callout %]
联想和惠普笔记本

联想和惠普的笔记本采用了“白名单”机制，也就是说，你更换无线网卡，电脑会拒绝开机，并要求你将“非法的”无线网卡拆下来。

这时你需要找另外一台笔记本电脑，查看无线网卡的 DEV、VEN 和 SUBSYS 参数，并且按照刷白名单教程，通过一些工具提取 BIOS 固件，将白名单修改成你自己的网卡，并重新刷 BIOS。

**注意，刷机有风险，刷坏会变砖！**<span class="blackout">变砖也不怕，只要找到自己电脑型号的盲刷包，对电脑进行盲刷，即可救砖。我的电脑砖过一次，然后就是靠盲刷省了几千块钱……</span>

[这里是刷白名单的教程](http://bbs.bios.net.cn/thread-4521994-1-1.html)
[% endcallout %]

### 显卡

一般情况下，Intel 核显是能够自动识别的，而 Nvidia 或 AMD 独显无解（即使系统能够识别出来），所以只能用核显。

大多数基于 Optimus 技术的笔记本是无法屏蔽核显的，这就意味着，N 卡独显在黑苹果中根本没有任何作用，除了多耗你一点电。如果不能把独显屏蔽，请到论坛搜索有关教程（涉及 DSDT，本文后面会提及）。

### 声卡

声卡有两种解决方案：万能声卡驱动和仿冒官方声卡。

万能声卡驱动是最简单的——只需要安装一个叫做 VoodooHDA 的驱动即可解决问题。不过音量太大的时候可能会爆音。

而仿冒官方声卡是一个非常麻烦的过程，需要对硬件有一定的了解（需要改 DSDT，本文后面会提及）。对于新手来说，这个过程是非常漫长和复杂的。

### 触摸板

如果苹果系统不支持你的触摸板，那么可以用万能驱动（VoodooController），只不过你很可能体验不了苹果的触摸板手势。

### 电池电量

我是通过一个叫 ACPIBatteryManager 的驱动来解决问题的。如果安装这个驱动导致系统崩溃，那么只能去改 DSDT 了。

### USB 3.0

我电脑没有 USB 3.0，所以我没做过相关研究。

## 6.5 DSDT

DSDT，简而言之就是用于识别硬件的<span class="blackout">、看多了容易脑残的</span>一些代码。

一般情况都是先从 Windows 或 Linux 中提取一个原始的 DSDT，然后在苹果系统中通过 DSDT Editor 来编辑。变色龙和四叶草都可以加载自定义 DSDT，所以你需要做的就是，改代码，保存，编译，重启，观察现象然后再改代码，如此反复。

此外还有一个工具叫做 IORegistryExplorer，是用来查看电脑硬件情况的。DSDT Editor 和它配合使用，效果更好。

<span class="blackout">因为改 DSDT 非常容易导致脑残，所以装黑苹果不仅浪费时间，而且还特别耽误事儿。如果你因此丢了女朋友，我概不负责。</span>

### 亮度调节

### 电池电量

### 原生电源管理

[% callout %]
这里是有意留空的

如果遇到了相关问题，去论坛上面找答案吧。
[% endcallout %]

## 7. 安装软件，开始享受新系统

这个不用解释了吧。

值得注意的是，尽管苹果系统免费，但是因为苹果公司要求系统只能在苹果设备上运行，所以你的黑苹果仍然是盗版。<span class="blackout">别带着自己电脑去外国嘚瑟，除非你想吃外国的牢饭。</span>

# 其他问题

## 系统升级

只要你没破解过内核，那么只管放心地从 App Store 升级系统。

如果你破解了内核（懒人版也是破解了内核），那么请先到论坛里把破解的内核下载好，升级之后重新破解一下。

如果嫌麻烦，建议你找个时间把自己电脑改成 UEFI+GPT 的。

## iMessage 和 FaceTime

黑苹果直接登录是登不进去的，因为这两个服务会对系统的真伪进行验证。

使用变色龙的，变色龙本身有一个功能可以对这两个服务进行破解，从而顺利登录。

而 Clover 没有类似功能。因此，需要到网上搜一个（或者问一些认识人，或者去苹果专卖店偷）正版电脑的序列号，然后给苹果客服打电话。一般情况下，和苹果客服磨叽磨叽就能解决问题。<span class="blackout">当然，不要让他们知道你的苹果是假的，除非你被 DSDT 折腾脑残了。</span>

## iWork 和 iMovie

这两套软件在新苹果电脑上是免费的，而黑苹果用户到 App Store 里一看，会发现它们价格感人。

因此，需要到网上搜一下老苹果用户如何免费使用这些软件。大致的思路是，先把电脑系统的语言换成英语，然后下载旧版的软件，接下来蹭 App Store 的优惠活动（免费升级）。升级之后你就成功“购买”了这些软件——以后即使重装也可以随便用了。

## 挂载 NTFS 磁盘

苹果系统可以读取 NTFS 磁盘，但是只读（因为苹果对 NTFS 支持有限，容易出错）。如果真需要写入，可以看[这里]({{ site.baseurl }}/2015/05/30/enable-ntfs-writing-support-in-os-x/)。

## 维护相关

### Recovery HD

Recovery HD 是一个相当于 PE 的紧急系统。

只有原生安装盘才会装出一个 Recovery HD。如果你的电脑没有（例如用了懒人版），那么在转成 UEFI+GPT 之后升级系统，Recovery HD 也会冒出来。

### 重装

如果有 Recovery HD，那么只需进 Recovery HD 里，然后选择重装。总之，具体操作和白苹果是基本相同的，除了开机时不能按 Command-R。

当然，你应该备份一下自己破解时用的驱动，还有 DSDT。如果弄丢了，你几个星期的辛苦就全白费了。

### 调整分区容量

很少有支持 HFS+ 文件系统的磁盘分区软件。

对于一般电脑而言，苹果本身的“磁盘工具”会以为你用了 Bootcamp，然后拒绝调整容量。因此要用其他软件——

* Windows 中有 Paragon Partition Manager。
* Linux 中有 GParted，但是只能缩小容量，不能扩大容量。
